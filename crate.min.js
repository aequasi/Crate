!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this.frozen=!1,this.services={},this.parameterBag=null,this.services=b,this.parameterBag=c}return e(a,[{key:"addParameter",value:function(a,b){return this.parameterBag.set(a,b),this}},{key:"getParameter",value:function(a){return this.parameterBag.get(a)}},{key:"removeParameter",value:function(a){return this.parameterBag.remove(a),this}},{key:"getParameters",value:function(){return this.parameterBag}},{key:"getService",value:function(a){return this.services[a]}},{key:"get",value:function(a){return this.getService(a)}}]),a}();c["default"]=f,b.exports=c["default"]},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=Function.prototype.bind,h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./ParameterBag"),j=d(i),k=a("./Definition"),l=d(k),m=a("./Container"),n=d(m),o=function(){function a(){f(this,a),this.frozen=!1,this.definitions={},this.parameterBag=null,this.parameterBag=new j["default"]([])}return h(a,[{key:"isFrozen",value:function(){return this.frozen}},{key:"freeze",value:function(){this.frozen=!0}},{key:"build",value:function(){var a=this.buildDefinitions();return new n["default"](a,this.parameterBag)}},{key:"buildFromJson",value:function(a){void 0!==a.parameters&&this.buildParametersFromJson(a.parameters),void 0!==a.services&&this.buildServicesFromJson(a.services);var b=this.buildDefinitions();return new n["default"](b,this.parameterBag)}},{key:"buildDefinitions",value:function(){if(this.isFrozen())throw Error("Container has already been built.");var a={},b=[];for(var c in this.definitions)this.definitions.hasOwnProperty(c)&&b.push({name:c,definition:this.definitions[c]});for(var d=0;b.length>0;){if(d>=50)throw Error("Circular reference detected");for(var f in b){var h=b[f],i=h.name,j=h.definition;this.argumentsInitialized(i,j)&&(d=0,a[i]=new(g.apply(j.module,[null].concat(e(this.prepareArguments(j.classArguments))))),b.splice(f,1))}d++}return this.frozen=!0,a}},{key:"argumentsInitialized",value:function(a,b){if(b.classArguments.length<1)return!0;var c=b.classArguments;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];if(void 0!==e.$ref&&void 0===this.services[e.$ref])return!1}return!0}},{key:"prepareArguments",value:function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=this.parseArgument(a[b]));return a}},{key:"parseArgument",value:function(a){if(Array.isArray(a))return this.prepareArguments(args[index]);if("string"==typeof a&&0===a.indexOf("%")&&a.substring(1).indexOf("%")===a.length-2)return this.getParameter(a.substring(1).slice(0,-1));if("object"==typeof a&&void 0!==a.$ref)return this.services[a.$ref];throw console.error(a),Error("Passed arg is not a valid argument")}},{key:"buildParametersFromJson",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1];for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if("string"!=typeof d){this.buildParametersFromJson(d,c+".");continue}this.addParameter(b+c,d)}}},{key:"buildServicesFromJson",value:function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];void 0===c.reference?void 0!==c.module&&this.setDefinition(b,new l["default"](c.module,c.args)):this.services[b]=c.reference}}},{key:"setDefinition",value:function(a,b){if(this.isFrozen())throw new Error("Adding definition to a frozen container is not allowed");return this.definitions[a]=b}},{key:"getDefinition",value:function(a){return this.definitions[a]}},{key:"addParameter",value:function(a,b){return this.parameterBag.set(a,b),this}},{key:"getParameter",value:function(a){return this.parameterBag.get(a)}},{key:"removeParameter",value:function(a){return this.parameterBag.remove(a),this}},{key:"getParameters",value:function(){return this.parameterBag}},{key:"getService",value:function(a){if(!this.isFrozen())throw new Error("Cannot grab services when the container isn't built");return this.services[a]}},{key:"get",value:function(a){return this.getService(a)}}]),a}();c["default"]=o,b.exports=c["default"]},{"./Container":1,"./Definition":3,"./ParameterBag":4}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?"":arguments[0],c=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];d(this,a),this.module=b,this.classArguments=c}return e(a,[{key:"module",get:function(){return this._module},set:function(a){this._module=a}},{key:"classArguments",get:function(){return this._arguments||[]},set:function(a){this._arguments=a}}]),e(a,[{key:"setModule",value:function(a){this.module=a}},{key:"addArgument",value:function(a){return this.classArguments.push(a),this}},{key:"setArgument",value:function(a,b){return this.classArguments[a]=b,this}},{key:"removeArgument",value:function(a){return void 0!==this.classArguments[a]&&delete this.classArguments[a],this}},{key:"setArguments",value:function(a){this.classArguments=a}}]),a}();c["default"]=f,b.exports=c["default"]},{}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];d(this,a),this.parameters=b}return e(a,[{key:"parameters",get:function(){return this._parameters},set:function(a){this._parameters=a}}]),e(a,[{key:"has",value:function(a){return void 0!==this.parameters[a]}},{key:"get",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1];return this.has(a)?this.parameters[a]:b}},{key:"set",value:function(a,b){return this.parameters[a]=b,this}},{key:"remove",value:function(a){return delete this.parameters[a],this}},{key:"all",value:function(){return this.parameters}}]),a}();c["default"]=f,b.exports=c["default"]},{}]},{},[1,2,3,4]);